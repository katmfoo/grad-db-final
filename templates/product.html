{% extends "base.html" %}

{% block title %}Product &middot; {{ product.name }}{% endblock %}

{% block content %}
  {% if product.seller_id == 1 %}
    <div>
      <button type="button" class="btn btn-primary mb-2" id="editProduct">Edit Product</button>
      <button type="button" class="btn btn-danger mb-2" id="deleteProduct">Delete Product</button>
    </div>
  {% endif %}

  <br>

  <h5>Product info</h5>
  <table class="table table-sm table-bordered">
    <tr>
      <td>Origin</td>
      <td>{{ product.seller }}</td>
    </tr>
    <tr>
      <td>Name</td>
      <td>{{ product.name }}</td>
    </tr>
    {% if product.product_code %}
      <tr>
        <td>Product code</td>
        <td>{{ product.product_code }}</td>
      </tr>
    {% endif %}
    <tr>
      <td>{% if product.seller_id == 4 %}Rental rate{% else %}List price{% endif %}</td>
      <td>${{ product.cost|number_format(2) }}</td>
    </tr>
    <tr>
      <td>Availability</td>
      <td>
          {% if product.quantity_available > 0 %}
            <span class="text-success">{{ product.quantity_available }} left</span>
          {% else %}
            <span class="text-danger">Out of stock</span>
          {% endif %}</td>
    </tr>
  </table>

  <script>
    jQuery(document).ready(function($) {
      $('#editProduct').click(function() {
        location.href = "{{ root }}/products/edit/?id={{ product.product_id }}";
      });
      $('#deleteProduct').click(function() {
        var shouldDelete = confirm("Are sure you want to delete this product?");
        if (shouldDelete) {
          window.location = "{{ root }}/scripts/delete_product.php?id={{ product.product_id }}";
        }
      });
    });
  </script>
{% endblock %}